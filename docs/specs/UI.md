# 仕様書（UI）

## 1. 画面一覧
- / : ランディング（精度方針、注意事項）
- /charts/new : 命式作成フォーム
- /charts/[id] : 命式結果表示（保存済み）
- /charts/[id]/debug : デバッグ表示（研究者/鑑定士向け）
- /library : 保存済み命式一覧
- /settings/presets : 設定プリセット管理
- /admin : 管理（テーブル/監査ログ）

## 2. /charts/new（入力フォーム）
### 入力項目
- 出生日時（ローカルISO: YYYY-MM-DDTHH:mm:ss）
- タイムゾーン（IANA: 例 Asia/Tokyo）
- 緯度（-90〜90）、経度（-180〜180）
- 地名（任意：表示用）
- 設定プリセット（必須）
- 設定上書き（任意：詳細トグル）

### バリデーション
- datetime_local: ISO8601
- tz: 空不可
- lat: [-90, 90]
- lon: [-180, 180]
- 出生時刻が不明の場合：初期は「未対応（計算不可）」とし、将来拡張（時刻範囲計算）で対応

### UX要件
- 境界（節入り/子刻）で結果が変わり得ることをUIで注意喚起
- 結果画面に「採用設定」と「再現性メタ」を表示

## 3. /charts/[id]（結果表示）
### 必須表示
- 4柱（年/月/日/時）: 干支（例：甲子）＋天干/地支
- 月蔵干：主導気（初/中/本）＋主導干
- 十大主星：日干×対象干（対象範囲はAPI出力に従う）
- 十二大従星：日干×地支＋点数
- 再現性メタ：schema_version / engine_version / config_hash / tables_version

## 4. /charts/[id]/debug（デバッグ）
- 節入り時刻（直前/直後）
- JD/JDN、UTC変換
- 真太陽時補正値（経度補正/均時差）
- 最終設定（プリセット＋上書き）
- engine flags（apparent/sidereal等）
- 監査（計算実行のメタ）

## 5. アクセシビリティ/品質
- ラベルとエラーの関連付け
- キーボード操作
- Tailwindでレスポンシブ
