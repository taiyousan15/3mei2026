# ワークフロー（開発・運用）

## 1. 開発原則
- 正しさはGoldenで定義する（= 100%精度）
- 近似禁止（節入り/真太陽時/蔵干境界）
- 流派差分は設定化（ハードコードしない）
- 再現性メタを必ず出力・保存する

## 2. ブランチ/PR運用
- main: 本番
- feat/*, fix/*: 作業
- PR必須（レビュー＋CI）
- PRには必ず記載：
  - 対象要件ID/仕様ID
  - 影響範囲（UI/API/DB/engine）
  - 追加/更新したGoldenケースID（engine変更時）
  - 根拠（参照資料/版/ページ：Goldenケースのsource）

## 3. Golden運用
- cases/_template.json 複製で追加
- source（資料名/版/ページ）を必ず記載
- 境界ケース（節入り±数分、子刻境界）を優先
- expectedを書き換えて通すのは禁止（根拠ある仕様変更は例外）

## 4. テーブル運用
- data/tables はバージョン付きファイル名（v1/v2…）で管理
- 更新は v2 を新規作成（原則 v1上書き禁止）
- validate_tables を通してからPR

## 5. Claude Code 実務
- docsの該当箇所を読み、作業対象IDを明確化
- 実装→テスト→修正の短ループ
- Goldenを先に追加してから修正（バグ再現→修正→回帰）
